# üóÉÔ∏è OZFS Files and File Schemas, explained in detail

(explain the roles of each file in more detail, the different types of district files (and their ethos: strict recording of the zoning code), and how each are used within our engines to resolve zoning information at the parcel level (maybe this latter part goes into the "Engines" section)

***

## the Municipality File

Information in the Municipality file is formatted per the **municipality Schema**. The schema is structured as follows with the indicated properties and sub-properties, including the status of each: required, conditionally required, or not required.

|   |   |   |
| - | - | - |
|   |   |   |
|   |   |   |
|   |   |   |

### Municipality File example

(image here)

(explanation here)

***

## the Open Zoning Districts file

**Zoning districts, the basics**

Different types of development (e.g. residential, commercial, industrial) are regulated by different types of Base zoning districts (e.g. Residential districts, Commercial districts, and Industrial districts). Each major classification of development type will be assigned a Base district type. Usually, each district type is broken up into multiple districts. While these districts all regulate the same type of development, the zoning regulations will vary slightly between them. For instance, while housing can be developed on all Residential-zoned lots, some Residential districts only allow up to three-family housing developments, while others allow up to four-plus-family developments. &#x20;

Cities will regulate additional zoning nuances inter-district through the use of Overlay Districts. The structure and use of these districts vary widely from municipality to municipality.

**Zoning districts <> Open Zoning Districts file**

The Open Zoning Districts file is the container for recording zoning information for municipalities' districts. Every district within a municipality that regulates housing that is below 6 stories should have its own district file. This file will contain general information about that zoning district (such as its zoning code abbreviation) as well as all zoning constraints that it regulates. The information and its format that is both allowed and required to be captured within a district file is regulated by the "districts file" schema. All district files will be checked for compatibility with this schema.&#x20;

The districts file schema references two other Open Zoning schemas, the "constraints application" and "constraints values" schemas. In conjunction, these schemas encompass the whole of the portion of Open Zoning's machine-readable zoning language that regulates district-level zoning information.&#x20;

\[for a quasi-visual of how the schemas reference one another] Information in the district files is formatted per three nested schemas:

* the **district file schema.** A subsection of its information is formatted by the:
  * **constraints application schema.** Within this schema, all constraint values (i.e. the actual numbers) are formatted via the:
    * **constraints values schema**.

This hierarchy can be seen in the diagram following the [**Open Zoning Feed Specification Structure** table](the-open-zoning-feed-specification-ozfs.md#open-zoning-feed-specification-structure).

### **1. the districts file schema**

The **districts file schema** is structured as follows with the indicated properties and sub-properties, including the status of each: required, conditionally required, or not required.

<table><thead><tr><th width="176">property</th><th width="175">sub-property</th><th width="137">type</th><th width="231">description</th><th width="187">required</th><th width="155">possible values</th></tr></thead><tbody><tr><td><em><strong>district</strong></em></td><td></td><td>object</td><td></td><td>required</td><td></td></tr><tr><td></td><td><em>identifier</em></td><td>key-value pair, the value being a string</td><td>(*needs to be finished)<br><br>the value is a unique state-municipality-district identifier, formatted via the OZ standard</td><td>required</td><td></td></tr><tr><td></td><td><em>name</em></td><td>key-value pair, the value being a string</td><td>the value is the full district name as written in the muni's zoning code; a list of possible values are contained within each municipality's file</td><td>required</td><td></td></tr><tr><td></td><td><em>districtType</em></td><td>key-value pair, the value being a string</td><td>the value is the district type as written in the muni's zoning code; a list of possible values are contained within each municipality's file</td><td>required</td><td></td></tr><tr><td></td><td><em>districtID</em></td><td>key-value pair, the value being a string</td><td>the value is the shortened district ID/code as written in the muni's zoning code; a list of possible values are contained within each municipality's file</td><td>required</td><td></td></tr><tr><td><em><strong>author</strong></em></td><td></td><td>string</td><td></td><td>required</td><td></td></tr><tr><td><em><strong>dateCreated</strong></em></td><td></td><td>date</td><td></td><td>required</td><td></td></tr><tr><td><em><strong>lastUpdated</strong></em></td><td></td><td>date</td><td></td><td>required</td><td></td></tr><tr><td><em><strong>usePermissions</strong></em></td><td></td><td>object</td><td></td><td>conditionally required; <br><br>required when:<br>the district type being recorded is a base district</td><td></td></tr><tr><td></td><td><em>permitted</em></td><td>key-value pair, the value being an array of strings</td><td>includes one or more bulk types</td><td>con</td><td>(in Minneapolis)<br>'single-family'; <br>'two-family'; <br>'three-family'; <br>'four-plus-family'</td></tr><tr><td><em><strong>accessoryStructuresPermissions</strong></em></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td></td><td>(see eponymous table below)</td><td></td><td></td><td></td><td></td></tr><tr><td><em><strong>constraints</strong></em></td><td></td><td>array of objects</td><td></td><td>required</td><td></td></tr><tr><td></td><td>constraintsModule</td><td>list</td><td></td><td>required</td><td></td></tr><tr><td></td><td>lot</td><td>object</td><td></td><td>required</td><td></td></tr></tbody></table>

_**accessoryStructuresPermissions**_ property table

<table><thead><tr><th width="298">property</th><th>sub-property</th><th>sub-property</th><th></th></tr></thead><tbody><tr><td><em><strong>accessoryStructuresPermissions</strong></em></td><td></td><td></td><td></td></tr><tr><td></td><td><em>bulkOptionality</em></td><td></td><td></td></tr><tr><td></td><td></td><td><em>bulks</em></td><td></td></tr><tr><td></td><td></td><td><em>allowedAccessoryStructures</em></td><td></td></tr><tr><td></td><td></td><td></td><td><em>max</em></td></tr><tr><td></td><td></td><td></td><td><em>types</em></td></tr></tbody></table>

***

### 2. constraints application schema

The **constraints application schema** is structured as follows with the indicated properties and sub-properties, including the status of each: required, conditionally required, or not required.

**notes**

* Any of the following properties can be sub-properties of any other one, i.e. any property can be nested as a sub-property within any other property. The intent of this design is to allow the structure of the zoning code that is regulating the constraint to be captured as close as possible to how it is written.
* Any of the following properties can take a constraint module as a sub-property. Constraint modules are defined within the **constraints value schema** section.

<table><thead><tr><th width="239">property</th><th width="194">sub-property</th><th>type</th><th>description</th><th>required</th><th> set of possible values,</th></tr></thead><tbody><tr><td><em><strong>bulkOptionality</strong></em> </td><td>(sub-properties apply to the objects within the array)</td><td>array of objects</td><td>applies constraints by bulks or bulk groups, each represented by an object</td><td>optional</td><td></td></tr><tr><td></td><td><em>bulks</em></td><td>key-value pair, the value being an array of strings</td><td>includes one or more bulk value; a list of possible values are contained within each municipality's file</td><td>required within parent constraint</td><td>(in Minneapolis)<br>'single-family'; <br>'two-family'; <br>'three-family'; <br>'four-plus-family'</td></tr><tr><td></td><td>(any constraints application module)<br><br>*same for any property </td><td></td><td></td><td></td><td></td></tr><tr><td></td><td>(any constraint value module)<br><br>*same for any property </td><td></td><td></td><td></td><td></td></tr><tr><td><em><strong>developmentOptionality</strong></em></td><td><p></p><p>(sub-properties apply to the objects within the array)</p></td><td>array of objects</td><td>applies constraint values by development type; the "primary/accessory" type exists in all muni.s; muni.s may have unique dev. types</td><td>optional</td><td></td></tr><tr><td></td><td><em>developmentType</em></td><td>key-value pair, the value being a string</td><td>includes one development type value; a list of possible values are contained within each municipality's file</td><td>required within parent constraint</td><td>'primary/accessory';<br>(any other type defined within the municipality file)</td></tr><tr><td></td><td><em>primaryStructures</em></td><td>object</td><td>contains constraints and constraint values that apply to the primary structure of a development</td><td>conditionally required; <br><br>required when:<br><em>developmentType</em> = primary/acessory <strong>and</strong> <em>accessoryStructures</em> variable is not present</td><td></td></tr><tr><td></td><td><em>accessoryStructures</em></td><td>object</td><td>contains constraints and constraint values that apply to the accessory structure(s) of a development</td><td>conditionally required; <br><br>required when:<br><em>developmentType</em> = primary/acessory <strong>and</strong> <em>primaryStructures</em> variable is not present</td><td></td></tr><tr><td><em><strong>districtTypeGroups</strong></em></td><td>(sub-properties apply to the objects within the array)</td><td>array of objects</td><td>applies constraints by  districty types and type groupings, each represented by an object</td><td>optional</td><td></td></tr><tr><td></td><td><em>districtTypes</em></td><td>key-value pair, the value being an array of strings</td><td>includes one or more district type values; a list of possible values are contained within each municipality's file</td><td>required within parent constraint</td><td>(in Minneapolis)<br>'Residential';<br>'Office Residential';<br>'all other';<br>(any district ID for any district listed within the Municipality file)</td></tr><tr><td><em><strong>storyType</strong></em></td><td>(sub-properties apply to the objects within the array)</td><td>array of objects</td><td>applies constraints by  story type(s), each represented by an object</td><td>optional</td><td></td></tr><tr><td></td><td><em>stories</em></td><td>key-value pair, the value being an array of strings</td><td>includes one or more story values; a list of possible values are contained within each municipality's file</td><td>required within parent constraint</td><td>(in Minneapolis)<br>'half story';<br>'basement';<br>'all other'</td></tr></tbody></table>

### 3. constraint values schema

The **constraint values schema** is structured as follows with the indicated properties and sub-properties, including the status of each: required, conditionally required, or not required.

<table><thead><tr><th width="136">constraint</th><th width="119">sub-property</th><th width="245">sub-property</th><th width="127">sub-property</th><th>type</th><th>required</th><th>description</th></tr></thead><tbody><tr><td><em><strong>lotWidth</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>minimum</em></td><td></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>lotArea</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>minimum</em></td><td></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td>maximum</td><td></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td><em><strong>height</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>wall</em></td><td></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>maximum</em></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td></td><td><em>roof</em></td><td></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>maximum</em></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>setbacks</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>front</em></td><td></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td><em>rear</em></td><td></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td><em>side</em></td><td></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>interior</em></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>corner</em></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>bulkOptionality</em></td><td></td><td>array of objects</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td></td><td>(see <strong>constraints application schema</strong> section)</td><td>n/a</td><td>n/a</td><td></td></tr><tr><td></td><td></td><td></td><td><em>interior</em></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td></td><td><em>corner</em></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td><em>fromAnotherStructure</em></td><td></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>primaryResidentialStructure</em></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td><em>habitableDwelling</em></td><td></td><td>non-negative integer</td><td>conditionally required</td><td></td></tr><tr><td></td><td><em>bulkOptionality</em></td><td></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td>(any <em><strong>setbacks</strong></em> property)</td><td></td><td>n/a</td><td>n/a</td><td></td></tr><tr><td><em><strong>lot coverage</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>maximum</em></td><td></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>FAR</strong></em></td><td></td><td></td><td></td><td>object</td><td>optiona</td><td></td></tr><tr><td></td><td><em>residential</em></td><td></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>floorArea</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>unit</em></td><td></td><td></td><td>object</td><td>required</td><td></td></tr><tr><td></td><td></td><td><em>standard</em></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td></td><td><em>minimum</em></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td></td><td></td><td><em>efficiency</em></td><td></td><td>object</td><td>conditionally required</td><td></td></tr><tr><td></td><td></td><td></td><td><em>minimum</em></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>floorWidth</strong></em></td><td></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td><em>minimum</em></td><td></td><td></td><td>object</td><td>required</td><td></td></tr><tr><td></td><td></td><td><em>value</em></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td></td><td></td><td><em>applicableFloorArea</em></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td><em><strong>stories</strong></em></td><td></td><td></td><td></td><td>object</td><td>optiona</td><td></td></tr><tr><td></td><td><em>maximum</em></td><td></td><td></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td></td><td><em>floorAreaContribution</em></td><td></td><td></td><td>object</td><td>optional</td><td></td></tr><tr><td></td><td></td><td><em>storyFloorElevation</em></td><td></td><td>object</td><td>required</td><td></td></tr><tr><td></td><td></td><td></td><td><em>minimum</em></td><td>non-negative integer</td><td>required</td><td></td></tr><tr><td></td><td></td><td></td><td><em>floorAreaPercentage</em></td><td>non-negative integer</td><td>required</td><td></td></tr></tbody></table>

Field types

* Date - Service day in the YYYYMMDD format. Since time within a service day can be above 24:00:00, a service day often contains information for the subsequent day(s). Example: 20180913 for September 13th, 2018.
* Email - An email address. Example: [example@example.com](mailto:example@example.com)
* Enum - An option from a set of predefined constants defined in the "Description" column. Example: The route\_type field contains a 0 for tram, a 1 for subway...
* ID - An ID field value is an internal ID, not intended to be shown to riders, and is a sequence of any UTF-8 characters. Using only printable ASCII characters is recommended. IDs defined in one .txt file are often referenced in another .txt file. Example: The stop\_id field in stops.txt is a ID. The stop\_id field in stop\_times.txt is an ID referencing stops.stop\_id.
* Language Code - An IETF BCP 47 language code. For an introduction to IETF BCP 47, refer to [http://www.rfc-editor.org/rfc/bcp/bcp47.txt](http://www.rfc-editor.org/rfc/bcp/bcp47.txt) and [http://www.w3.org/International/articles/language-tags/](http://www.w3.org/International/articles/language-tags/). Example: en for English, en-US for American English or de for German.
* Latitude - WGS84 latitude in decimal degrees. The value must be greater than or equal to -90.0 and less than or equal to 90.0. Example: 41.890169 for the Colosseum in Rome.
* Longitude - WGS84 longitude in decimal degrees. The value must be greater than or equal to -180.0 and less than or equal to 180.0. Example: 12.492269 for the Colosseum in Rome.
* Non-negative Float - A floating point number greater than or equal to 0.
* Non-negative Integer - A integer greater than or equal to 0.
* Phone number - A phone number.
* Time - Time in the HH:MM:SS format (H:MM:SS is also accepted). The time is measured from "noon minus 12h" of the service day (effectively midnight except for days on which daylight savings time changes occur. For more information, see the guidelines article). For times occurring after midnight, enter the time as a value greater than 24:00:00 in HH:MM:SS local time for the day on which the trip schedule begins. Example: 14:30:00 for 2:30PM or 25:35:00 for 1:35AM on the next day.
* Text - A string of UTF-8 characters, which is aimed to be displayed and which must therefore be human readable.
* URL - A fully qualified URL that includes http:// or https://, and any special characters in the URL must be correctly escaped. See the following [http://www.w3.org/Addressing/URL/4\_URI\_Recommentations.html](http://www.w3.org/Addressing/URL/4\_URI\_Recommentations.html) for a description of how to create fully qualified URL values.

### District Files examples

(examples of each type of district file and how information within them is regulated by the Municipality file)
